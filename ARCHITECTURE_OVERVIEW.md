# 2Sweety Dating App - Production Architecture Overview

## System Architecture Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         EXTERNAL USERS / CLIENTS                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Web Browser   â”‚   iOS App          â”‚   Android App     â”‚   Admin Panel    â”‚
â”‚  (React SPA)    â”‚  (Flutter)         â”‚  (Flutter)        â”‚   (PHP)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚                   â”‚                   â”‚                  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚              CLOUDFLARE (Optional CDN/DDoS)               â”‚
         â”‚   - SSL Termination                                       â”‚
         â”‚   - DDoS Protection                                       â”‚
         â”‚   - CDN for Static Assets                                 â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â–¼
         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚                    api.2sweety.com                        â”‚
         â”‚              DNS: Pointing to Server IP                   â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                     â”‚
                                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           SERVER INFRASTRUCTURE                             â”‚
â”‚                    (VPS/Cloud - Running Coolify/Docker)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                          TRAEFIK (Reverse Proxy)                      â”‚  â”‚
â”‚  â”‚  - HTTPS/SSL (Let's Encrypt Auto-Renewal)                            â”‚  â”‚
â”‚  â”‚  - Request Routing                                                    â”‚  â”‚
â”‚  â”‚  - Load Balancing                                                     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                  â”‚                                          â”‚
â”‚       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚       â–¼                          â–¼                          â–¼              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
â”‚  â”‚  APP CONTAINER  â”‚   â”‚ REDIS CONTAINER â”‚     â”‚  MYSQL CONTAINER â”‚       â”‚
â”‚  â”‚  lo4wc088...    â”‚   â”‚  redis-2sweety  â”‚     â”‚   z8co40wo4...   â”‚       â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤     â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”‚
â”‚  â”‚                 â”‚   â”‚                 â”‚     â”‚                  â”‚       â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚  Redis 7        â”‚     â”‚  MySQL 8.x       â”‚       â”‚
â”‚  â”‚ â”‚  Nginx      â”‚ â”‚   â”‚                 â”‚     â”‚                  â”‚       â”‚
â”‚  â”‚ â”‚  (Web)      â”‚ â”‚   â”‚  Port: 6379     â”‚     â”‚  Port: 3306      â”‚       â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚                 â”‚     â”‚                  â”‚       â”‚
â”‚  â”‚        â”‚        â”‚   â”‚  Uses:          â”‚     â”‚  Database:       â”‚       â”‚
â”‚  â”‚        â–¼        â”‚   â”‚  - Cache        â”‚     â”‚  - gomeet        â”‚       â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚   â”‚  - Sessions     â”‚     â”‚                  â”‚       â”‚
â”‚  â”‚ â”‚ PHP-FPM     â”‚ â”‚   â”‚  - Queues       â”‚     â”‚  Volumes:        â”‚       â”‚
â”‚  â”‚ â”‚ (Laravel)   â”‚ â”‚   â”‚                 â”‚     â”‚  - mysql-data    â”‚       â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚  Volumes:       â”‚     â”‚                  â”‚       â”‚
â”‚  â”‚        â”‚        â”‚   â”‚  - redis-data   â”‚     â”‚  Backups:        â”‚       â”‚
â”‚  â”‚        â–¼        â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚  Daily 2AM       â”‚       â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚                           â”‚  /root/db-bak... â”‚       â”‚
â”‚  â”‚ â”‚ Supervisor  â”‚ â”‚                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
â”‚  â”‚ â”‚ (Workers)   â”‚ â”‚                                                       â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚                                                       â”‚
â”‚  â”‚                 â”‚                                                       â”‚
â”‚  â”‚  Queue Workers: â”‚                                                       â”‚
â”‚  â”‚  - 4x General   â”‚                                                       â”‚
â”‚  â”‚  - Notif Worker â”‚                                                       â”‚
â”‚  â”‚  - Payment Work â”‚                                                       â”‚
â”‚  â”‚  - Image Proc   â”‚                                                       â”‚
â”‚  â”‚                 â”‚                                                       â”‚
â”‚  â”‚  Storage:       â”‚                                                       â”‚
â”‚  â”‚  /var/www/html/ â”‚                                                       â”‚
â”‚  â”‚  â”œâ”€â”€ public/    â”‚                                                       â”‚
â”‚  â”‚  â”œâ”€â”€ storage/   â”‚                                                       â”‚
â”‚  â”‚  â”‚   â”œâ”€â”€ logs/  â”‚                                                       â”‚
â”‚  â”‚  â”‚   â””â”€â”€ app/   â”‚                                                       â”‚
â”‚  â”‚  â””â”€â”€ vendor/    â”‚                                                       â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                       â”‚
â”‚                                                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚                    â”‚                    â”‚
                 â–¼                    â–¼                    â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   FIREBASE       â”‚  â”‚    AGORA RTC     â”‚  â”‚  PAYMENT GWs     â”‚
    â”‚                  â”‚  â”‚                  â”‚  â”‚                  â”‚
    â”‚ - Auth           â”‚  â”‚ - Video Calls    â”‚  â”‚ - Razorpay       â”‚
    â”‚ - Firestore      â”‚  â”‚ - Audio Calls    â”‚  â”‚ - Stripe         â”‚
    â”‚ - Cloud Msg      â”‚  â”‚ - WebRTC         â”‚  â”‚ - PayPal         â”‚
    â”‚ - Storage        â”‚  â”‚                  â”‚  â”‚ - PayStack       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ - Flutterwave    â”‚
                                                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
                 â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚   ONESIGNAL      â”‚
    â”‚                  â”‚
    â”‚ - Push Notif     â”‚
    â”‚ - iOS/Android    â”‚
    â”‚ - Web Push       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Flow Overview

### 1. User Authentication Flow
```
User â†’ Browser/App â†’ Traefik â†’ Nginx â†’ PHP/Laravel â†’ Firebase Auth
                                                    â†“
                                            MySQL (user record)
                                                    â†“
                                            Redis (session)
                                                    â†“
                                            â† JWT Token
```

### 2. Real-time Chat Flow
```
User A â†’ App â†’ Firebase Firestore (write message)
                        â†“
                   Firebase Listeners
                        â†“
              User B â† App â† Firebase Firestore (read message)
                                    â†“
                            OneSignal (push notification)
```

### 3. Video/Audio Call Flow
```
User A â†’ App â†’ API â†’ Agora Token Service â†’ Agora App ID + Token
                                                    â†“
                                            Agora RTC Network
                                                    â†“
                                            User B â† App â† Agora
```

### 4. Payment Processing Flow
```
User â†’ App â†’ Traefik â†’ Nginx â†’ PHP/Laravel â†’ Payment Gateway API
                                        â†“
                                   Queue Worker
                                        â†“
                               Process Payment Job
                                        â†“
                              Update MySQL (payment)
                                        â†“
                           OneSignal (success notification)
```

### 5. Background Job Processing
```
API Request â†’ Laravel â†’ Queue Job (Redis)
                              â†“
                       Queue Worker (picks job)
                              â†“
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â–¼                   â–¼
             Send Email          Process Image
             via SMTP            Optimize/Resize
                    â”‚                   â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â–¼
                     Update MySQL Status
                              â†“
                    Send Push Notification
```

---

## Critical Dependencies

### External Services (MUST be configured)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SERVICE          â”‚ PURPOSE              â”‚ CRITICALITY       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Firebase         â”‚ Auth, Chat, Storage  â”‚ ðŸ”´ CRITICAL      â”‚
â”‚ OneSignal        â”‚ Push Notifications   â”‚ ðŸ”´ CRITICAL      â”‚
â”‚ Agora            â”‚ Video/Audio Calls    â”‚ ðŸ”´ CRITICAL      â”‚
â”‚ Payment Gateway  â”‚ Subscriptions/Coins  â”‚ ðŸ”´ CRITICAL      â”‚
â”‚ Email SMTP       â”‚ Password Resets      â”‚ ðŸŸ¡ HIGH          â”‚
â”‚ CDN (Optional)   â”‚ Static Assets        â”‚ ðŸŸ¢ RECOMMENDED   â”‚
â”‚ Monitoring       â”‚ Uptime Alerts        â”‚ ðŸŸ¢ RECOMMENDED   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Internal Services (MUST be running)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ SERVICE          â”‚ STATUS CHECK                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ MySQL            â”‚ docker ps | grep z8co40wo4              â”‚
â”‚ Redis            â”‚ docker ps | grep redis                  â”‚
â”‚ App Container    â”‚ docker ps | grep lo4wc0888              â”‚
â”‚ Queue Workers    â”‚ docker exec ... ps aux | grep queue     â”‚
â”‚ Cron Jobs        â”‚ crontab -l                              â”‚
â”‚ SSL Certificate  â”‚ openssl s_client -connect ...           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Resource Requirements

### Minimum Server Specs (Basic Operation)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CPU:     2 cores                                       â”‚
â”‚ RAM:     4 GB                                          â”‚
â”‚ Disk:    50 GB SSD                                     â”‚
â”‚ Network: 100 Mbps                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Recommended Server Specs (Production - 1000 users)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CPU:     4 cores                                       â”‚
â”‚ RAM:     8 GB                                          â”‚
â”‚ Disk:    100 GB SSD                                    â”‚
â”‚ Network: 1 Gbps                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Optimal Server Specs (High Load - 10000+ users)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CPU:     8+ cores                                      â”‚
â”‚ RAM:     16+ GB                                        â”‚
â”‚ Disk:    250+ GB SSD                                   â”‚
â”‚ Network: 1+ Gbps                                       â”‚
â”‚ Backup:  S3/R2 for media storage                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Container Resource Allocation
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CONTAINER        â”‚ CPU LIMIT   â”‚ MEM LIMIT   â”‚ PRIORITY â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ App (lo4wc...)   â”‚ 2 cores     â”‚ 4 GB        â”‚ HIGH     â”‚
â”‚ MySQL (z8co...)  â”‚ 2 cores     â”‚ 2 GB        â”‚ HIGH     â”‚
â”‚ Redis            â”‚ 1 core      â”‚ 512 MB      â”‚ MEDIUM   â”‚
â”‚ Traefik          â”‚ 0.5 core    â”‚ 256 MB      â”‚ MEDIUM   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Network Ports

### External (Internet-facing)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PORT    â”‚ SERVICE           â”‚ PURPOSE                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 443     â”‚ HTTPS (Traefik)   â”‚ All web traffic          â”‚
â”‚ 80      â”‚ HTTP (Traefik)    â”‚ Redirect to HTTPS        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Internal (Docker network - 'coolify')
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ PORT    â”‚ SERVICE           â”‚ PURPOSE                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 3306    â”‚ MySQL             â”‚ Database connections     â”‚
â”‚ 6379    â”‚ Redis             â”‚ Cache/Queue/Sessions     â”‚
â”‚ 9000    â”‚ PHP-FPM           â”‚ FastCGI to Nginx         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Agora RTC (for video/audio - firewall must allow)
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Ports: 1080-10000 UDP                                  â”‚
â”‚ Purpose: WebRTC media streams                          â”‚
â”‚ Direction: Bidirectional                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Data Storage Layout

### Application Files
```
/var/lib/docker/volumes/
â”œâ”€â”€ app-data/
â”‚   â””â”€â”€ _data/
â”‚       â””â”€â”€ var/www/html/
â”‚           â”œâ”€â”€ public/          (web root)
â”‚           â”œâ”€â”€ storage/
â”‚           â”‚   â”œâ”€â”€ app/
â”‚           â”‚   â”‚   â””â”€â”€ public/  (user uploads)
â”‚           â”‚   â”‚       â”œâ”€â”€ profiles/
â”‚           â”‚   â”‚       â”œâ”€â”€ chat-media/
â”‚           â”‚   â”‚       â””â”€â”€ gifts/
â”‚           â”‚   â””â”€â”€ logs/
â”‚           â”‚       â””â”€â”€ laravel.log
â”‚           â””â”€â”€ vendor/
```

### Database Files
```
/var/lib/docker/volumes/
â””â”€â”€ mysql-data/
    â””â”€â”€ _data/
        â””â”€â”€ gomeet/             (database)
            â”œâ”€â”€ users.ibd
            â”œâ”€â”€ messages.ibd
            â”œâ”€â”€ likes.ibd
            â”œâ”€â”€ matches.ibd
            â””â”€â”€ payments.ibd
```

### Redis Data
```
/var/lib/docker/volumes/
â””â”€â”€ redis-data/
    â””â”€â”€ _data/
        â””â”€â”€ dump.rdb           (persistence file)
```

### Backups
```
/root/
â””â”€â”€ db-backups/
    â”œâ”€â”€ gomeet_20251030_020000.sql.gz
    â”œâ”€â”€ gomeet_20251029_020000.sql.gz
    â””â”€â”€ ... (30 days retention)
```

### Logs
```
/var/log/
â”œâ”€â”€ cron-*.log              (cron job outputs)
â”œâ”€â”€ db-backup.log           (backup status)
â”œâ”€â”€ docker-cleanup.log      (cleanup operations)
â”œâ”€â”€ disk-check.log          (disk space alerts)
â””â”€â”€ health-check.log        (health monitoring)
```

---

## Security Layers

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SECURITY DEFENSE IN DEPTH                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  Layer 7: External                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ Cloudflare DDoS Protection (optional)      â”‚            â”‚
â”‚  â”‚ Rate Limiting                              â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                       â”‚                                     â”‚
â”‚  Layer 6: SSL/TLS                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ Let's Encrypt SSL Certificate              â”‚            â”‚
â”‚  â”‚ TLS 1.2/1.3 Only                           â”‚            â”‚
â”‚  â”‚ Strong Cipher Suites                       â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                       â”‚                                     â”‚
â”‚  Layer 5: Network                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ Firewall (UFW/iptables)                    â”‚            â”‚
â”‚  â”‚ Only ports 80, 443, 22 exposed             â”‚            â”‚
â”‚  â”‚ SSH key-only authentication                â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                       â”‚                                     â”‚
â”‚  Layer 4: Application                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ JWT Authentication                         â”‚            â”‚
â”‚  â”‚ CSRF Protection                            â”‚            â”‚
â”‚  â”‚ XSS Prevention                             â”‚            â”‚
â”‚  â”‚ SQL Injection Prevention (ORM)             â”‚            â”‚
â”‚  â”‚ Rate Limiting per User                     â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                       â”‚                                     â”‚
â”‚  Layer 3: Container                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ Non-root User (www-data)                   â”‚            â”‚
â”‚  â”‚ Read-only Filesystem (where possible)      â”‚            â”‚
â”‚  â”‚ Resource Limits (CPU, Memory)              â”‚            â”‚
â”‚  â”‚ No Privileged Mode                         â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                       â”‚                                     â”‚
â”‚  Layer 2: Database                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ Strong Passwords                           â”‚            â”‚
â”‚  â”‚ Internal Network Only                      â”‚            â”‚
â”‚  â”‚ Encrypted Backups                          â”‚            â”‚
â”‚  â”‚ Parameterized Queries                      â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                       â”‚                                     â”‚
â”‚  Layer 1: File System                                       â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
â”‚  â”‚ Secure File Permissions                    â”‚            â”‚
â”‚  â”‚ No Execute on Uploads                      â”‚            â”‚
â”‚  â”‚ Input Validation                           â”‚            â”‚
â”‚  â”‚ Virus Scanning (optional)                  â”‚            â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Monitoring Points

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ MONITORING CHECKPOINT    â”‚ CHECK FREQUENCY â”‚ ALERT ON       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Site Uptime              â”‚ 1 minute        â”‚ Down 1 min     â”‚
â”‚ API Response Time        â”‚ 5 minutes       â”‚ > 2 seconds    â”‚
â”‚ Container Health         â”‚ 5 minutes       â”‚ Not running    â”‚
â”‚ Disk Space               â”‚ 6 hours         â”‚ > 80%          â”‚
â”‚ Database Connections     â”‚ 5 minutes       â”‚ > 400/500      â”‚
â”‚ Failed Queue Jobs        â”‚ Hourly          â”‚ > 10 failed    â”‚
â”‚ SSL Certificate Expiry   â”‚ Daily           â”‚ < 30 days      â”‚
â”‚ Database Backup          â”‚ Daily           â”‚ Backup failed  â”‚
â”‚ Error Log                â”‚ Real-time       â”‚ Critical error â”‚
â”‚ Memory Usage             â”‚ 5 minutes       â”‚ > 90%          â”‚
â”‚ CPU Usage                â”‚ 5 minutes       â”‚ > 90%          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Disaster Recovery Plan

### RTO (Recovery Time Objective): 15 minutes
### RPO (Recovery Point Objective): 24 hours (daily backups)

### Recovery Procedures:

1. **Complete System Failure:**
   ```bash
   # 1. Start database
   docker start z8co40wo4sc8ow4wsog4cw44
   sleep 30

   # 2. Start application
   docker start lo4wc0888kowwwco8w0gsoco-220639619982
   sleep 20

   # 3. Verify health
   curl https://api.2sweety.com/api/health
   ```

2. **Database Corruption:**
   ```bash
   # 1. Stop app (prevent writes)
   docker stop lo4wc0888kowwwco8w0gsoco-220639619982

   # 2. Restore from last backup
   BACKUP=/root/db-backups/gomeet_YYYYMMDD_HHMMSS.sql.gz
   gunzip < $BACKUP | docker exec -i z8co40wo4sc8ow4wsog4cw44 mysql -u root -p gomeet

   # 3. Restart app
   docker start lo4wc0888kowwwco8w0gsoco-220639619982
   ```

3. **Server Completely Lost:**
   - Provision new server
   - Install Coolify
   - Deploy containers from Coolify config
   - Restore database from off-site backup
   - Update DNS if IP changed
   - Estimated time: 2-4 hours

---

## Performance Optimization Checklist

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ OPTIMIZATION          â”‚ STATUS  â”‚ IMPACT    â”‚ EFFORT        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ âœ… OpCache Enabled    â”‚ âŒ TODO â”‚ 5x faster â”‚ 15 min        â”‚
â”‚ âœ… Redis for Cache    â”‚ âŒ TODO â”‚ 3x faster â”‚ 15 min        â”‚
â”‚ âœ… Database Indexes   â”‚ âŒ TODO â”‚ 10x fasterâ”‚ 30 min        â”‚
â”‚ âœ… Image Optimization â”‚ âŒ TODO â”‚ 50% size  â”‚ 30 min        â”‚
â”‚ âœ… CDN for Assets     â”‚ âš ï¸ OPT  â”‚ 2x faster â”‚ 1 hour        â”‚
â”‚ âœ… Query Optimization â”‚ âŒ TODO â”‚ 5x faster â”‚ 2 hours       â”‚
â”‚ âœ… Lazy Loading       â”‚ âš ï¸ OPT  â”‚ 30% fasterâ”‚ 2 hours       â”‚
â”‚ âœ… Gzip Compression   â”‚ âš ï¸ OPT  â”‚ 70% size  â”‚ 15 min        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Legend: âŒ TODO = Not implemented
        âœ… DONE = Implemented
        âš ï¸ OPT  = Optional but recommended
```

---

## Scaling Strategy

### Current: Single Server (0-1000 users)
```
1 Server â†’ All services
```

### Phase 2: Separated Database (1000-5000 users)
```
Server 1: App + Redis
Server 2: MySQL (dedicated)
```

### Phase 3: Load Balanced (5000-20000 users)
```
Load Balancer
    â†“
â”Œâ”€â”€â”€â”´â”€â”€â”€â”
App 1  App 2  â†’ Redis Cluster â†’ MySQL Master
                                    â†“
                              MySQL Replicas
```

### Phase 4: Microservices (20000+ users)
```
- Separate chat service
- Separate video call service
- Separate payment service
- Separate matching algorithm service
- Message queue (RabbitMQ/Kafka)
- Object storage (S3/R2) for media
```

---

**This architecture provides:**
- âœ… High availability
- âœ… Horizontal scalability
- âœ… Disaster recovery
- âœ… Performance monitoring
- âœ… Security in depth
- âœ… Cost efficiency at small scale
- âœ… Clear upgrade path to enterprise scale

---

**Last Updated:** 2025-10-30
**Next Review:** Monthly
