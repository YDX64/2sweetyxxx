<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2sweety - Staging Ortamı Ekleme Rehberi</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .header {
            background: linear-gradient(135deg, #00b894 0%, #00a085 100%);
            color: white;
            padding: 40px;
            text-align: center;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .content {
            padding: 40px;
        }

        .current-status {
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
            color: white;
            padding: 30px;
            border-radius: 15px;
            margin: 25px 0;
        }

        .step {
            background: #f8f9fa;
            padding: 30px;
            border-radius: 15px;
            margin: 25px 0;
            border-left: 6px solid #00b894;
        }

        .step h3 {
            color: #00b894;
            margin-bottom: 15px;
        }

        .code-block {
            background: #2d3748;
            color: #e2e8f0;
            padding: 25px;
            border-radius: 10px;
            font-family: 'Courier New', monospace;
            margin: 20px 0;
            overflow-x: auto;
            line-height: 1.6;
        }

        .warning {
            background: linear-gradient(135deg, #ff7675 0%, #d63031 100%);
            color: white;
            padding: 25px;
            border-radius: 12px;
            margin: 20px 0;
        }

        .info {
            background: linear-gradient(135deg, #6c5ce7 0%, #a29bfe 100%);
            color: white;
            padding: 25px;
            border-radius: 12px;
            margin: 20px 0;
        }

        .success {
            background: linear-gradient(135deg, #00b894 0%, #00a085 100%);
            color: white;
            padding: 25px;
            border-radius: 12px;
            margin: 20px 0;
        }

        .checklist {
            background: white;
            padding: 25px;
            border-radius: 12px;
            margin: 20px 0;
            border: 2px solid #00b894;
        }

        .checklist li {
            margin: 10px 0;
            padding-left: 30px;
            position: relative;
        }

        .checklist li::before {
            content: '✓';
            position: absolute;
            left: 0;
            color: #00b894;
            font-weight: bold;
            font-size: 1.2em;
        }

        .tabs {
            display: flex;
            background: #f8f9fa;
            border-radius: 10px;
            padding: 5px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            background: transparent;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            min-width: 120px;
        }

        .tab.active {
            background: #667eea;
            color: white;
        }

        .tab-content {
            display: none;
            padding: 20px;
            background: white;
            border-radius: 10px;
            margin: 10px 0;
        }

        .tab-content.active {
            display: block;
        }

        @media (max-width: 768px) {
            .header h1 { font-size: 2em; }
            .content { padding: 20px; }
            .tabs { flex-direction: column; }
            .tab { min-width: auto; }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>🚀 2sweety Staging Ortamı Ekleme</h1>
            <p>Mevcut production sistemine development/staging ortamı ekliyoruz</p>
        </div>

        <div class="content">
            <div class="current-status">
                <h2>📊 Mevcut Durum</h2>
                <ul style="margin: 15px 0; padding-left: 20px; font-size: 1.1em;">
                    <li><strong>✅ Production:</strong> 2sweety.com çalışıyor</li>
                    <li><strong>✅ Coolify:</strong> Kurulu ve aktif</li>
                    <li><strong>✅ GitHub:</strong> Bağlı ve deploy ediyor</li>
                    <li><strong>✅ Supabase:</strong> Production veritabanı aktif</li>
                    <li><strong>✅ Stripe:</strong> Live payments çalışıyor</li>
                    <li><strong>❌ Staging:</strong> Yok - Ekleyeceğiz!</li>
                </ul>
            </div>

            <div class="warning">
                <h2>⚠️ ÖNEMLİ: Production'a Dokunmuyoruz!</h2>
                <p>Mevcut production sisteminiz çalışmaya devam edecek. Sadece yeni staging ortamı ekliyoruz.</p>
            </div>

            <div class="step">
                <h3>1️⃣ SSH ile Sunucuya Bağlan</h3>
                <p>Mevcut sunucunuza bağlanın:</p>
                <div class="code-block">
ssh root@45.9.190.79
# veya
ssh devops@45.9.190.79
                </div>
                <div class="info">
                    <strong>Kontrol:</strong> <code>docker ps</code> komutu ile Coolify'ın çalıştığını doğrulayın.
                </div>
            </div>

            <div class="step">
                <h3>2️⃣ Development Branch Oluştur</h3>
                <p>GitHub'da yeni development branch oluşturalım:</p>

                <div class="tabs">
                    <button class="tab active" onclick="showTab(event, 'github-web')">🌐 GitHub Web</button>
                    <button class="tab" onclick="showTab(event, 'git-cli')">💻 Git CLI</button>
                </div>

                <div id="github-web" class="tab-content active">
                    <h4>GitHub Web Interface</h4>
                    <ol style="margin: 15px 0; padding-left: 20px;">
                        <li>GitHub → 2sweety repository</li>
                        <li>Branch dropdown → "Create branch: development"</li>
                        <li>From: main</li>
                        <li>Create branch</li>
                    </ol>
                </div>

                <div id="git-cli" class="tab-content">
                    <h4>Git Command Line</h4>
                    <div class="code-block">
# Lokal olarak
git checkout main
git pull origin main
git checkout -b development
git push -u origin development
                    </div>
                </div>
            </div>

            <div class="step">
                <h3>3️⃣ Supabase Development Projesi</h3>
                <p>Yeni Supabase projesi oluşturun:</p>
                
                <ol style="margin: 15px 0; padding-left: 20px;">
                    <li><strong>Supabase Dashboard</strong> → New Project</li>
                    <li><strong>Name:</strong> 2sweety-development</li>
                    <li><strong>Region:</strong> Production ile aynı seçin</li>
                    <li><strong>Plan:</strong> Free tier (yeterli)</li>
                </ol>

                <div class="info">
                    <h4>📋 Proje Oluştuktan Sonra:</h4>
                    <ul style="margin: 10px 0; padding-left: 20px;">
                        <li>Project URL ve anon key'i kopyalayın</li>
                        <li>SQL Editor'da production schema'yı import edin</li>
                        <li>Auth Settings'e dev.2sweety.com ekleyin</li>
                    </ul>
                </div>

                <div class="code-block">
-- Production'dan schema export etmek için:
-- Supabase Dashboard → SQL Editor → New Query

-- Tüm tabloları ve ilişkileri export et
-- Sonra development projesinde çalıştır
                </div>
            </div>

            <div class="step">
                <h3>4️⃣ DNS Kaydı Ekle</h3>
                <p>Hostinger DNS panelinde:</p>
                
                <table style="width: 100%; border-collapse: collapse; margin: 20px 0;">
                    <tr style="background: #f8f9fa; font-weight: bold;">
                        <td style="padding: 10px; border: 1px solid #ddd;">Tip</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">Ad</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">Değer</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">TTL</td>
                    </tr>
                    <tr>
                        <td style="padding: 10px; border: 1px solid #ddd;">A</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">dev</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">45.9.190.79</td>
                        <td style="padding: 10px; border: 1px solid #ddd;">300</td>
                    </tr>
                </table>

                <div class="success">
                    <strong>Test:</strong> 5-10 dakika sonra <code>ping dev.2sweety.com</code> ile kontrol edin.
                </div>
            </div>

            <div class="step">
                <h3>5️⃣ Environment Variables Hazırla</h3>
                <p>Development için environment variables:</p>

                <div class="code-block">
# .env.development (GitHub'da saklanacak)
SUPABASE_URL=https://your-dev-project-id.supabase.co
SUPABASE_ANON_KEY=your-dev-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-dev-service-key

# Stripe Test Keys
STRIPE_SECRET_KEY=sk_test_...
STRIPE_PUBLISHABLE_KEY=pk_test_...
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY=pk_test_...

# Environment
NEXT_PUBLIC_ENV=development
NODE_ENV=development

# App URLs
NEXT_PUBLIC_APP_URL=https://dev.2sweety.com
NEXT_PUBLIC_API_URL=https://dev.2sweety.com/api
                </div>

                <div class="warning">
                    <strong>Güvenlik:</strong> Bu dosyayı GitHub'a eklemeden önce .gitignore'a ekleyin veya GitHub Secrets kullanın.
                </div>
            </div>

            <div class="step">
                <h3>6️⃣ Coolify'de Staging Application</h3>
                <p>Coolify dashboard'da yeni uygulama oluşturun:</p>

                <ol style="margin: 15px 0; padding-left: 20px;">
                    <li><strong>Coolify Dashboard</strong> → New Application</li>
                    <li><strong>Source:</strong> GitHub</li>
                    <li><strong>Repository:</strong> Mevcut 2sweety repo</li>
                    <li><strong>Branch:</strong> development</li>
                    <li><strong>Build Pack:</strong> Node.js / Next.js</li>
                    <li><strong>Domain:</strong> https://dev.2sweety.com</li>
                    <li><strong>Auto Deploy:</strong> ON</li>
                </ol>

                <div class="info">
                    <h4>Environment Variables Ekle:</h4>
                    <p>Coolify → Application → Environment sekmesinde yukarıdaki .env.development değerlerini ekleyin.</p>
                </div>
            </div>

            <div class="step">
                <h3>7️⃣ İlk Staging Deploy</h3>
                <p>Development branch'e ilk commit:</p>

                <div class="code-block">
# Development branch'e geç
git checkout development

# Küçük bir değişiklik yap (test için)
echo "# Development Environment" >> README-dev.md
git add README-dev.md
git commit -m "feat: add development environment setup"

# Push et - Coolify otomatik deploy edecek
git push origin development
                </div>

                <div class="success">
                    <strong>Sonuç:</strong> 2-3 dakika sonra https://dev.2sweety.com açılmalı!
                </div>
            </div>

            <div class="step">
                <h3>8️⃣ Stripe Test Webhook</h3>
                <p>Stripe Dashboard'da development için webhook ekleyin:</p>

                <div class="code-block">
# Stripe Dashboard → Webhooks → Add endpoint
Endpoint URL: https://dev.2sweety.com/api/stripe/webhook
Events: payment_intent.succeeded, customer.subscription.created, vs.

# Test mode'da olduğundan emin olun!
                </div>
            </div>

            <div class="step">
                <h3>9️⃣ Development Workflow Test</h3>
                <p>Artık hızlı development cycle'ı test edin:</p>

                <div class="tabs">
                    <button class="tab active" onclick="showTab(event, 'cursor-workflow')">💻 Cursor</button>
                    <button class="tab" onclick="showTab(event, 'lovable-workflow')">❤️ Lovable</button>
                    <button class="tab" onclick="showTab(event, 'bolt-workflow')">⚡ Bolt</button>
                </div>

                <div id="cursor-workflow" class="tab-content active">
                    <h4>Cursor Development</h4>
                    <div class="code-block">
# 1. Cursor'da projeyi aç
# 2. development branch'e geç
git checkout development

# 3. Yeni feature geliştir
# Örnek: kullanıcı profil sayfası düzenle

# 4. Commit & push
git add .
git commit -m "feat: improve user profile page"
git push origin development

# 5. 15-30 saniye sonra dev.2sweety.com'da canlı!
                    </div>
                </div>

                <div id="lovable-workflow" class="tab-content">
                    <h4>Lovable Development</h4>
                    <div class="code-block">
# 1. Lovable'da projeyi import et
# Repository: 2sweety
# Branch: development

# 2. Lovable'da kod değiştir
# Instant preview gör

# 3. Commit & push
# Lovable otomatik push edebilir

# 4. dev.2sweety.com'da production benzeri test!
                    </div>
                </div>

                <div id="bolt-workflow" class="tab-content">
                    <h4>Bolt AI Development</h4>
                    <div class="code-block">
# 1. Bolt'ta proje import et
# Branch: development

# 2. AI ile feature geliştir
"Add real-time chat feature"
"Improve matching algorithm"

# 3. AI kodu ürettikten sonra
# GitHub'a push et

# 4. dev.2sweety.com'da test et!
                    </div>
                </div>
            </div>

            <div class="step">
                <h3>🔟 Production'a Çıkarma Süreci</h3>
                <p>Staging'de test ettikten sonra production'a çıkarma:</p>

                <div class="code-block">
# 1. Development'da feature tamamlandı ve test edildi

# 2. Pull Request oluştur
# GitHub → development → main PR

# 3. Code review (isteğe bağlı)

# 4. Merge et
# main branch'e merge

# 5. Production otomatik deploy
# Coolify production uygulaması otomatik çalışacak
                </div>

                <div class="warning">
                    <strong>Güvenlik:</strong> Main branch'i protected yapın. Sadece PR ile merge edilsin.
                </div>
            </div>

            <div class="success">
                <h2>🎉 Staging Ortamı Hazır!</h2>
                
                <div class="checklist">
                    <h3>✅ Kontrol Listesi</h3>
                    <ul style="list-style: none;">
                        <li>Development branch oluşturuldu</li>
                        <li>Supabase development projesi aktif</li>
                        <li>dev.2sweety.com DNS kaydı eklendi</li>
                        <li>Coolify staging uygulaması çalışıyor</li>
                        <li>Environment variables ayarlandı</li>
                        <li>Stripe test webhook eklendi</li>
                        <li>İlk deploy başarılı</li>
                        <li>Development workflow test edildi</li>
                    </ul>
                </div>

                <div style="text-align: center; margin: 30px 0; padding: 25px; background: rgba(255, 255, 255, 0.1); border-radius: 15px;">
                    <h3>🚀 Artık Hızlı Development!</h3>
                    <p style="font-size: 1.2em; margin: 15px 0;">
                        <strong>development branch</strong> → push → <strong>15-30 saniye</strong> → <strong>dev.2sweety.com</strong><br>
                        Test et → main'e merge → <strong>2sweety.com</strong> production!
                    </p>
                </div>
            </div>

            <div class="info">
                <h2>🔄 Günlük Workflow</h2>
                <ol style="margin: 15px 0; padding-left: 20px;">
                    <li><strong>Sabah:</strong> Cursor'da feature geliştir → development push</li>
                    <li><strong>Öğlen:</strong> dev.2sweety.com'da test et → Stripe, Supabase kontrol</li>
                    <li><strong>Akşam:</strong> Lovable/Bolt ile hızlı prototyping</li>
                    <li><strong>Gece:</strong> Final test → main'e merge → production!</li>
                </ol>
            </div>
        </div>
    </div>

    <script>
        function showTab(event, tabName) {
            const tabContents = document.querySelectorAll('.tab-content');
            tabContents.forEach(content => {
                content.classList.remove('active');
            });

            const tabs = document.querySelectorAll('.tab');
            tabs.forEach(tab => {
                tab.classList.remove('active');
            });

            document.getElementById(tabName).classList.add('active');
            event.target.classList.add('active');
        }
    </script>
</body>
</html> 